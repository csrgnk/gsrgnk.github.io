<!-- Header Start -->
<header>
  <!-- Orange Top Box: Site Name + Tagline -->
  <div class="top-box">
    <h1 class="site-name">Om Namo Narayanaya</h1>
    <p class="tagline">Bhakthi Channel</p>
  </div>

  <!-- Blue Section Box -->
  <div class="section-box">
    <h2>Dasabodha Grantha Telugu Lyrics</h2>
  </div>

  <!-- Search Box -->
  <div class="search-box">
    <input type="text" id="siteSearchInput" placeholder="Search posts and pages...">
    <button id="siteSearchBtn">Search</button>
  </div>

  <!-- Search Results -->
  <div id="searchResults"></div>

  <!-- Navigation Menu -->
  <nav class="main-menu">
    <div class="menu-toggle" id="mobileMenuToggle">&#9776;</div>
    <ul class="menu" id="siteMenu">
      <li><a href="/">Home</a></li>
      <li><a href="/about">About</a></li>
      <li><a href="/contact">Contact</a></li>
      <li><a href="/admin-panel">Login/Register</a></li>
    </ul>
  </nav>
</header>

<!-- Styles -->
<style>
  body { margin:0; font-family:Arial,sans-serif; }

  /* Orange Top Box */
  .top-box {
    background:orange;
    color:#fff;
    text-align:center;
    padding:20px 10px;
  }
  .top-box .site-name { font-size:28px; margin:0; font-weight:bold; }
  .top-box .tagline { font-size:16px; margin:5px 0 0 0; }

  /* Blue Section Box */
  .section-box {
    background:#333399;
    color:#fff;
    text-align:center;
    padding:10px 5px;
  }
  .section-box h2 { margin:0; font-size:20px; }

  /* Search Box */
  .search-box { display:flex; justify-content:center; margin:15px 0; }
  .search-box input { flex:1; max-width:400px; padding:10px; border-radius:8px 0 0 8px; border:1px solid #ccc; font-size:16px; }
  .search-box button { padding:10px 15px; border:none; background:#5555cc; color:#fff; border-radius:0 8px 8px 0; cursor:pointer; }
  .search-box button:hover { background:#7777ee; }

  /* Search Results */
  #searchResults { text-align:center; font-size:16px; margin-bottom:15px; }

  /* Navigation Menu */
  nav.main-menu { background:#f2f2f2; width:100%; }
  .menu { list-style:none; display:flex; justify-content:center; padding:0; margin:0; gap:15px; }
  .menu li a { color:#333; text-decoration:none; padding:10px; display:block; font-weight:bold; }
  .menu li a:hover { text-decoration:underline; }

  /* Mobile Styles */
  .menu-toggle { display:none; font-size:28px; cursor:pointer; padding:10px; text-align:center; }
  @media(max-width:768px){
    .menu { flex-direction:column; display:none; width:100%; background:#f2f2f2; }
    .menu li { width:100%; text-align:center; }
    .menu-toggle { display:block; }
  }
</style>

<!-- Scripts -->
<script>
  // Mobile Menu Toggle
  const mobileToggle = document.getElementById('mobileMenuToggle');
  const siteMenu = document.getElementById('siteMenu');
  mobileToggle.addEventListener('click', ()=>{
    siteMenu.style.display = (siteMenu.style.display === 'flex') ? 'none' : 'flex';
  });

  // Dynamic Site Search
  const searchInput = document.getElementById('siteSearchInput');
  const searchBtn = document.getElementById('siteSearchBtn');
  const searchResults = document.getElementById('searchResults');

  let posts = [];
  let pages = [];

  fetch('/posts.json')
    .then(res => res.json())
    .then(data => { posts = data; })
    .catch(err => console.error(err));

  fetch('/pages.json')
    .then(res => res.json())
    .then(data => { pages = data; })
    .catch(err => console.error(err));

  function searchSite(query){
    const q = query.toLowerCase();
    let results = [];

    posts.forEach(post => {
      if(post.title.toLowerCase().includes(q) || (post.content && post.content.toLowerCase().includes(q))){
        results.push({type:"Post", title:post.title, url:"/"+post.slug+"/"});
      }
    });

    pages.forEach(page => {
      if(page.title.toLowerCase().includes(q) || (page.content && page.content.toLowerCase().includes(q))){
        results.push({type:"Page", title:page.title, url:"/"+page.slug+"/"});
      }
    });

    return results;
  }

  searchBtn.addEventListener('click', ()=>{
    const query = searchInput.value.trim();
    searchResults.innerHTML = "";
    if(!query) return;

    const results = searchSite(query);
    if(results.length === 0){
      searchResults.innerHTML = "<p>Not available</p>";
      return;
    }

    const ul = document.createElement('ul');
    results.forEach(item=>{
      const li = document.createElement('li');
      li.innerHTML = `<strong>[${item.type}]</strong> <a href="${item.url}">${item.title}</a>`;
      ul.appendChild(li);
    });
    searchResults.appendChild(ul);
  });

  searchInput.addEventListener('keypress', e => {
    if(e.key === 'Enter'){ e.preventDefault(); searchBtn.click(); }
  });
</script>
